<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmation de votre réservation {{ reservation.reference }}</title>
    <style type="text/css">
        /* Client-specific resets */
        body, table, td, a { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }
        /* Propriétés spécifiques à Outlook, ignorées par les autres clients */
        table, td { mso-table-lspace: 0pt !important; mso-table-rspace: 0pt !important; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        
        /* Reset styles */
        body { margin: 0 !important; padding: 0 !important; width: 100% !important; }
        
        /* iOS blue links */
        a[x-apple-data-detectors] {
            color: inherit !important;
            text-decoration: none !important;
            font-size: inherit !important;
            font-family: inherit !important;
            font-weight: inherit !important;
            line-height: inherit !important;
        }
        
        /* Main styles */
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333333;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
            -webkit-text-size-adjust: none;
            width: 100% !important;
        }
        
        /* Email container */
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        .header {
            background-color: #007bff;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 5px 5px 0 0;
        }
        
        /* Content */
        .content {
            padding: 20px;
            background-color: #ffffff;
            border: 1px solid #dddddd;
            border-top: none;
            border-radius: 0 0 5px 5px;
        }
        
        /* Reservation details */
        .reservation-details {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid #e9ecef;
        }
        
        /* Button */
        .button {
            display: inline-block;
            padding: 10px 20px;
            background-color: #28a745;
            color: white !important;
            text-decoration: none;
            border-radius: 5px;
            margin: 15px 0;
            font-weight: bold;
        }
        
        /* Footer */
        .footer {
            margin-top: 20px;
            font-size: 12px;
            color: #6c757d;
            text-align: center;
            padding: 10px 0;
        }
        
        /* Responsive */
        @media screen and (max-width: 600px) {
            .email-container {
                width: 100% !important;
                padding: 10px !important;
            }
            .header, .content {
                border-radius: 0 !important;
            }
        }
    </style>
</head>
<body style="margin: 0; padding: 0; -webkit-text-size-adjust: none; -ms-text-size-adjust: none; width: 100%;">
    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background-color: #f4f4f4; font-family: Arial, sans-serif;">
        <tr>
            <td align="center" valign="top" style="padding: 20px 10px;">
                <!-- Email Container -->
                <div class="email-container" style="max-width: 600px; margin: 0 auto;">
                    <!-- Header -->
                    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background-color: #007bff; border-radius: 5px 5px 0 0;">
                        <tr>
                            <td align="center" style="padding: 20px;">
                                <h1 style="color: white; margin: 0 0 10px 0; font-size: 24px;">Confirmation de réservation</h1>
                                <p style="margin: 0; color: rgba(255, 255, 255, 0.8);">
                                    Référence : <strong style="color: white;">{{ reservation.reference }}</strong>
                                </p>
                            </td>
                        </tr>
                    </table>
                    
                    <!-- Content -->
                    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background-color: #ffffff; border: 1px solid #dddddd; border-top: none; border-radius: 0 0 5px 5px;">
                        <tr>
                            <td style="padding: 30px;">
                                <p style="margin: 0 0 15px 0;">Bonjour {{ user.first_name }} {{ user.last_name }},</p>
                                
                                <p style="margin: 0 0 15px 0;">Nous vous remercions pour votre réservation. Voici un récapitulatif de votre commande :</p>
                                
                                <!-- Reservation Details -->
                                <table role="presentation" cellspacing="0" cellpadding="15" border="0" width="100%" style="background-color: #f8f9fa; border: 1px solid #e9ecef; border-radius: 5px; margin: 0 0 20px 0; width: 100%;">
                                    <tr>
                                        <td>
                                            <h3 style="margin: 0 0 15px 0; color: #007bff;">Détails du voyage</h3>
                                            <p style="margin: 0 0 10px 0;"><strong>Départ :</strong> {{ reservation.horaire.trajet.depart.ville.nom }} &rarr; {{ reservation.horaire.trajet.depart.nom }}</p>
                                            <p style="margin: 0 0 10px 0;"><strong>Date de départ :</strong> {{ reservation.horaire.date_depart|date:"d/m/Y H:i" }}</p>
                                            <p style="margin: 0 0 10px 0;"><strong>Date d'arrivée :</strong> {{ reservation.horaire.date_arrivee|date:"d/m/Y H:i" }}</p>
                                            <p style="margin: 0 0 10px 0;"><strong>Nombre de passagers :</strong> {{ reservation.billets.count }}</p>
                                            <p style="margin: 0;"><strong>Montant total :</strong> {{ reservation.montant_total|floatformat:0 }} Fbu</p>
                                        </td>
                                    </tr>
                                </table>
                                
                                <p style="margin: 0 0 20px 0;">Vous pouvez consulter les détails de votre réservation à tout moment en cliquant sur le bouton ci-dessous :</p>
                                
                                <!-- Button -->
                                <table role="presentation" cellspacing="0" cellpadding="0" border="0" align="center" style="margin: 0 auto 20px auto;">
                                    <tr>
                                        <td align="center" bgcolor="#28a745" style="border-radius: 5px;">
                                            <a href="{{ site_url }}{% url 'reservations:reservation-detail' pk=reservation.pk %}" target="_blank" style="background-color: #28a745; border: 1px solid #28a745; border-radius: 5px; color: #ffffff; display: inline-block; font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; line-height: 40px; text-align: center; text-decoration: none; padding: 0 25px;">Voir ma réservation</a>
                                        </td>
                                    </tr>
                                </table>
                                
                                <p style="margin: 0 0 15px 0;">Pour toute question concernant votre réservation, n'hésitez pas à nous contacter :</p>
                                
                                <ul style="margin: 0 0 20px 0; padding-left: 20px;">
                                    <li style="margin-bottom: 5px;">Par email : <a href="mailto:{{ DEFAULT_FROM_EMAIL }}" style="color: #007bff; text-decoration: none;">{{ DEFAULT_FROM_EMAIL }}</a></li>
                                    <li>Par téléphone : {{ contact_phone }}</li>
                                </ul>
                                
                                <p style="margin: 0 0 20px 0;">Nous vous remercions de votre confiance et vous souhaitons un excellent voyage !</p>
                                
                                <p style="margin: 0;">Cordialement,<br>L&apos;équipe Larissa Inspiration spirit travel</p>
                            </td>
                        </tr>
                    </table>
                    
                    <!-- Footer -->
                    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-top: 20px;">
                        <tr>
                            <td style="text-align: center; color: #6c757d; font-size: 12px; padding: 10px 0;">
                                <p style="margin: 0 0 5px 0;">Cet email a été envoyé automatiquement, merci de ne pas y répondre.</p>
                                <p style="margin: 0;">{{ current_year }} Larissa Inspiration spirit travel. Tous droits r&eacute;serv&eacute;s.</p>
                            </td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
    </table>
</body>
</html>
